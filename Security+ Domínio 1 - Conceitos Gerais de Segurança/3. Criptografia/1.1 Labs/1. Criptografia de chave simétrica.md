____
![[Pasted image 20251201102336.png]]

![[Pasted image 20251201102400.png]]

**SOLUÇÃO:**
**Passo 1:** Abra o link do laboratório para acessar a máquina Ubuntu:

![Content Image](https://assets.ine.com/content/labs/networking-labs/Symmetric%20Key%20Encryption/1.jpg)

**Passo 2:** Verifique se **o OpenSSL** está instalado usando o seguinte comando:

**Comando:**

```
openssl version
```

![Content Image](https://assets.ine.com/content/labs/networking-labs/Symmetric%20Key%20Encryption/2.jpg)**O OpenSSL** é um conjunto de ferramentas completo para criptografia de propósito geral e comunicação segura.

**Passo 3:** Você pode usar o seguinte comando para listar as cifras (algoritmos de criptografia) disponíveis que o OpenSSL suporta:

**Comando:**

```
openssl enc -ciphers
```

![Content Image](https://assets.ine.com/content/labs/networking-labs/Symmetric%20Key%20Encryption/3.jpg)Você pode ver diferentes algoritmos como **AES** , Camellia, Triple DES etc. Usaremos o **algoritmo AES,** que é o mais utilizado , e especificamente escolheremos o **algoritmo aes-256-cbc,** o mais comum , para criptografia e descriptografia.

**O que é AES-256-CBC?**

**O AES (Advanced Encryption Standard)** é um algoritmo de criptografia simétrica estabelecido pelo Instituto Nacional de Padrões e Tecnologia (NIST) em 2001. Tornou-se o algoritmo de criptografia padrão para proteger informações sensíveis. O AES suporta tamanhos de chave de 128, 192 e 256 bits. O número no nome da cifra (AES- **256** -CBC) refere-se ao tamanho da chave. **CBC (cipher-block chaining)** é um modo de operação para cifras de bloco como o AES.

Para mais detalhes, consulte: https://nordlayer.com/blog/aes-encryption/

## Tarefa 1: Criptografar e descriptografar um arquivo de texto

**Passo 4:** Vamos primeiro visualizar o **confidential-data.txt** arquivo **presente em /root/Desktop/resources** :

**Comando:**
```
cd /root/Desktop/resources
ls
cat confidential-data.txt
```
![[Pasted image 20251201103740.png]]Temos um arquivo de texto com dados confidenciais que precisam ser criptografados.

**Passo 5:** Agora, criptografe o arquivo de texto usando o seguinte comando:

**Comando:**

```
openssl enc -aes-256-cbc -pbkdf2 -p -in confidential-data.txt -out encrypted_file.enc
```

Aqui,

- **-aes-256-cbc** : Especifica o algoritmo de criptografia a ser usado.
- **-pbkdf2** : PBKDF2 (Password-Based Key Derivation Function 2) é uma função de derivação de chave que ajuda a fortalecer a chave de criptografia com base em uma senha ou frase secreta.
- **-p** : Imprime a chave e outros parâmetros, como o salt e o vetor de inicialização (IV) utilizados. O salt é um valor aleatório usado para reforçar a segurança do processo de derivação da chave, e o IV é um valor de inicialização que garante que textos cifrados únicos sejam produzidos mesmo ao criptografar os mesmos dados com a mesma chave.
- **-in** : Especifica o arquivo de entrada que você deseja criptografar.
- **-out** : Especifica o arquivo de saída onde os dados criptografados serão gravados.

Após executar este comando, você será solicitado a inserir uma senha. Use uma senha forte, como **$B1g7re#D0g$JumpeD** . A chave simétrica usada para criptografia/descriptografia é derivada desta senha.

$B1g7re#D0g$JumpeD

![Content Image](https://assets.ine.com/content/labs/networking-labs/Symmetric%20Key%20Encryption/5.jpg)

```
salt=A8A1EDDFAE8B41A7
key=D5B2775700A18E3226BB04B43F397D04790D62DF65A0CB918D081480887B03A8
iv =FB2E1C856C6C39F3FC885AC1EBCB3ED1
```


Criptografamos o arquivo com sucesso. Tente visualizar o **arquivo encrypted_file.enc** .

**Comando:**

```
cat encrypted_file.enc
```

![Content Image](https://assets.ine.com/content/labs/networking-labs/Symmetric%20Key%20Encryption/5_1.jpg)

Os dados estão criptografados.

**Passo 6:** Para descriptografar o arquivo, você pode usar o seguinte comando:

**Comando:**

```
openssl enc -d -aes-256-cbc -pbkdf2 -p -in encrypted_file.enc -out decrypted_file.txt
```

Aqui,

- **-d** : Indica descriptografia.
- **-aes-256-cbc** : Especifica o algoritmo de descriptografia, que deve ser o mesmo usado para criptografia.
- **-pbkdf2** : Especifica o uso de PBKDF2 (Password-Based Key Derivation Function 2) para derivação de chaves.
- **-p** : Imprime a chave e outros parâmetros, como o salt e o vetor de inicialização (IV) utilizados.
- **-in** : Especifica o arquivo de entrada, que é o arquivo criptografado que você deseja descriptografar.
- **out** : Especifica o arquivo de saída onde os dados descriptografados serão gravados.

Você será solicitado a inserir a senha usada durante o processo de criptografia. No nosso caso, a senha foi **$B1g7re#D0g$JumpeD** . A chave simétrica usada para descriptografia será derivada dessa senha.

![Content Image](https://assets.ine.com/content/labs/networking-labs/Symmetric%20Key%20Encryption/6.jpg)

```
root@ip-10-3-16-29:~/Desktop/resources# openssl enc -d -aes-256-cbc -pbkdf2 -p -in encrypted_file.enc -out decrypted_file.txt
enter aes-256-cbc decryption password: $B1g7re#D0g$JumpeD
salt=A8A1EDDFAE8B41A7
key=D5B2775700A18E3226BB04B43F397D04790D62DF65A0CB918D081480887B03A8
iv =FB2E1C856C6C39F3FC885AC1EBCB3ED1

```

O comando foi executado com sucesso. Verifique o **decrypted_file.txt .** arquivo

**Comando:**

```
cat decrypted_file.txt
```

![Content Image](https://assets.ine.com/content/labs/networking-labs/Symmetric%20Key%20Encryption/6_1.jpg)

Os dados foram descriptografados com sucesso.

## Tarefa 2: Criptografar e descriptografar um arquivo de imagem

Os comandos usados ​​para criptografar/descriptografar um arquivo de texto também podem ser usados ​​em um arquivo de imagem.

**Passo 7:** Vamos primeiro visualizar o **ine-logo.png** arquivo **presente em /root/Desktop/resources** :

![Content Image](https://assets.ine.com/content/labs/networking-labs/Symmetric%20Key%20Encryption/7.jpg)

Este arquivo de imagem precisa ser criptografado.

**Passo 8:** Use o seguinte comando para criptografar o **arquivo de imagem ine-logo.png** .

**Comando:**

```
openssl enc -aes-256-cbc -pbkdf2 -p -in ine-logo.png -out encrypted_image.enc
```

Digite uma senha forte como antes quando solicitado: **$B1g7re#D0g$JumpeD**

![Content Image](https://assets.ine.com/content/labs/networking-labs/Symmetric%20Key%20Encryption/8.jpg)

```
root@ip-10-3-16-29:~/Desktop/resources# openssl enc -aes-256-cbc -pbkdf2 -p -in ine-logo.png -out encrypted_image.enc
enter aes-256-cbc encryption password: @6594901610Ka
Verifying - enter aes-256-cbc encryption password:
salt=EBF0144C2DBB4357
key=09BEC2087B0605FF0A1939D11B0C92227D5891BA25F6BE78DC2EB6BEFEADE95A
iv =7A017E2F9D3B4F07A1D72443E25A94D9

```

Criptografamos com sucesso o arquivo de imagem. O **arquivo encrypted_image.enc** não poderá ser visualizado, pois está criptografado.

**Passo 9:** Para descriptografar o arquivo, você pode usar o seguinte comando:

**Comando:**

```
openssl enc -d -aes-256-cbc -pbkdf2 -p -in encrypted_image.enc -out decrypted_image.png
```

Quando solicitado, insira a senha usada durante a criptografia: **$B1g7re#D0g$JumpeD**

![Content Image](https://assets.ine.com/content/labs/networking-labs/Symmetric%20Key%20Encryption/9.jpg)

```
root@ip-10-3-16-29:~/Desktop/resources# openssl enc -d -aes-256-cbc -pbkdf2 -p -in encrypted_image.enc -out decrypted_image.png
enter aes-256-cbc decryption password: @6594901610Ka
salt=EBF0144C2DBB4357
key=09BEC2087B0605FF0A1939D11B0C92227D5891BA25F6BE78DC2EB6BEFEADE95A
iv =7A017E2F9D3B4F07A1D72443E25A94D9

```

O comando foi executado com sucesso. Tente visualizar o **decrypted_image.png .** arquivo

![Content Image](https://assets.ine.com/content/labs/networking-labs/Symmetric%20Key%20Encryption/9_1.jpg)

A imagem foi descriptografada com sucesso.

# Conclusão

Neste laboratório, aprendemos como realizar criptografia e descriptografia de chave simétrica usando o algoritmo AES para um arquivo de texto e um arquivo de imagem usando o OpenSSL.

# Referências

- [Criptografia AES](https://nordlayer.com/blog/aes-encryption/)
- [OpenSSL](https://www.openssl.org/)